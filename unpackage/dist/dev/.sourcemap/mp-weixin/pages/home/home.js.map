{"version":3,"file":"home.js","sources":["pages/home/home.vue","../../soft/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvaG9tZS9ob21lLnZ1ZQ"],"sourcesContent":["<template>\n\t<view class=\"home dark\">\n\t\t<!-- 顶部导航 -->\n\t\t<view class=\"nav\" :style=\"{ paddingTop: (statusBarHeight + 6) + 'px' }\">\n\t\t\t<view class=\"brand\">\n\t\t\t\t<text class=\"brand-icon\">◼︎</text>\n\t\t\t\t<text class=\"brand-name\">星展影院</text>\n\t\t\t</view>\n\t\t\t<view class=\"nav-right\">\n\t\t\t\t<text class=\"avatar\">🟣</text>\n\t\t\t</view>\n\t\t</view>\n\n\t\t<!-- 顶部横幅与轮播占位 -->\n\t\t<view class=\"banner\">\n\t\t\t<swiper class=\"banner-swiper\" circular autoplay interval=\"4000\" duration=\"500\" :indicator-dots=\"false\" @change=\"onBannerChange\">\n\t\t\t\t<swiper-item v-for=\"(b,idx) in banners\" :key=\"idx\">\n\t\t\t\t\t<!-- <image class=\"banner-img\" :src=\"b.url || bannerImage\" mode=\"aspectFill\" /> -->\n\t\t\t\t\t<image class=\"banner-img\" :src=\"bannerImage\" mode=\"aspectFill\" />\n\t\t\t\t</swiper-item>\n\t\t\t</swiper>\n\t\t\t<view class=\"banner-info\">\n\t\t\t\t<view class=\"title\">专属私密空间</view>\n\t\t\t\t<view class=\"subtitle\">畅享极致观影体验</view>\n\t\t\t</view>\n\t\t\t<!-- 自定义指示点：右下角，偏大 -->\n\t\t\t<view class=\"dots-right\" v-if=\"(banners && banners.length) || true\">\n\t\t\t\t<view v-for=\"i in (banners && banners.length ? banners.length : 3)\" :key=\"i\" class=\"dot2\" :class=\"{active: (i-1) === currentBanner}\"></view>\n\t\t\t</view>\n\t\t</view>\n\n\t\t<!-- 核心功能入口 -->\n\t\t<view class=\"features\">\n\t\t\t<view class=\"feature\" v-for=\"f in features\" :key=\"f.key\" @click=\"onFeatureClick(f)\">\n\t\t\t\t<text class=\"f-icon\">{{ f.icon }}</text>\n\t\t\t\t<text class=\"f-text\">{{ f.text }}</text>\n\t\t\t</view>\n\t\t</view>\n\n\t\t<!-- 营业信息与标签 -->\n\t\t<view class=\"status-card\">\n\t\t\t<view class=\"row\">\n\t\t\t\t<view class=\"dot online\" v-if=\"isOpenNow\"></view>\n\t\t\t\t<view class=\"dot offline\" v-else></view>\n\t\t\t\t<text class=\"s-text\">{{ isOpenNow ? '营业中' : '休息中' }} · 营业时间: {{ (business && business.openTime) || '10:00' }} - {{ (business && business.closeTime) || '24:00' }}</text>\n\t\t\t</view>\n\t\t\t<view class=\"tags\">\n\t\t\t\t<text v-for=\"t in (business && business.tags ? business.tags : tags)\" :key=\"t\" class=\"tag\">{{ t }}</text>\n\t\t\t</view>\n\t\t</view>\n\n\t\t<!-- 热门包厢 -->\n\t\t<view class=\"section hot\">\n\t\t\t<view class=\"section-head\">\n\t\t\t\t<text class=\"section-title\">热门包厢</text>\n\t\t\t\t<text class=\"more\" @click=\"toMore('hot')\">查看全部 〉</text>\n\t\t\t</view>\n\t\t\t<view class=\"grid\">\n\t\t\t\t<view class=\"card\" v-for=\"room in hotRooms\" :key=\"room.id\" @click=\"toDetail(room)\">\n\t\t\t\t\t<!-- <image class=\"cover\" :src=\"room.cover\" mode=\"aspectFill\" /> -->\n\t\t\t\t\t<image class=\"cover\" src=\"/static/bx.jpg\" mode=\"aspectFill\" />\n\t\t\t\t\t<view class=\"card-body\">\n\t\t\t\t\t\t<view class=\"c-title\">{{ room.name }}</view>\n\t\t\t\t\t\t<view class=\"c-meta\"><text class=\"ico\">👥</text>{{ room.capacity }} 人</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\n\t\t<!-- 主题包厢精选 -->\n\t\t<view class=\"section\">\n\t\t\t<view class=\"section-head\">\n\t\t\t\t<text class=\"section-title\">主题包厢精选</text>\n\t\t\t</view>\n\t\t\t<view class=\"grid small\">\n\t\t\t\t<view class=\"card mini\" v-for=\"room in themedRooms\" :key=\"room.id\" @click=\"toDetail(room)\">\n\t\t\t\t\t<image class=\"cover\" :src=\"room.cover\" mode=\"aspectFill\" />\n\t\t\t\t\t<view class=\"mini-title\">{{ room.name }}</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\t</view>\n</template>\n\n<script>\n\texport default {\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tbannerImage: '/static/banner/bj1.jpg',\n\t\t\t\tstatusBarHeight: 0,\n\t\t\t\tcurrentBanner: 0,\n\t\t\t\tfeatures: [\n\t\t\t\t\t{ key: 'intro', icon: '🏛️', text: '影城介绍' },\n\t\t\t\t\t{ key: 'vip', icon: '💳', text: '怎么会' },\n\t\t\t\t\t{ key: 'contact', icon: '☎️', text: '联系电话' }\n\t\t\t\t],\n\t\t\t\tbanners: [],\n\t\t\t\tbusiness: null,\n\t\t\t\ttags: ['4K HDR','杜比视界','独立观影','私密空间','卫生保障'],\n\t\t\t\thotRooms: [],\n\t\t\t\tthemedRooms: [],\n\t\t\t\tloading: true,\n\t\t\t\terror: '',\n\t\t\t\tisOpenNow: false\n\t\t\t};\n\t\t},\n\t\t\tonLoad() {\n\t\t\tconst info = uni.getSystemInfoSync();\n\t\t\tthis.statusBarHeight = (info.statusBarHeight || 0);\n\t\t\tthis.fetchHome();\n\t\t},\n\t\tmethods: {\n\t\t\tisWithin(open, close) {\n\t\t\t\t// open/close: 'HH:mm'\n\t\t\t\tconst pad = (n) => (n < 10 ? '0' + n : '' + n)\n\t\t\t\tconst now = new Date()\n\t\t\t\tconst cur = parseInt(pad(now.getHours()) + pad(now.getMinutes()))\n\t\t\t\tconst o = parseInt((open || '10:00').replace(':',''))\n\t\t\t\tconst c = parseInt((close || '24:00').replace(':',''))\n\t\t\t\tif (o <= c) return cur >= o && cur <= c\n\t\t\t\t// 跨天营业，如 22:00-02:00\n\t\t\t\treturn cur >= o || cur <= c\n\t\t\t},\n\t\t\tasync fetchHome() {\n\t\t\t\tthis.loading = true;\n\t\t\t\tthis.error = '';\n\t\t\t\ttry {\n\t\t\t\t\t// 从云函数获取首页数据\n\t\t\t\t\tconst res = await uniCloud.callFunction({\n\t\t\t\t\t\tname: 'cinema-home',\n\t\t\t\t\t\tdata: {}\n\t\t\t\t\t});\n\t\t\t\t\tconst data = res?.result?.data || {};\n\t\t\t\t\tthis.hotRooms = data.hotRooms || this.mockRooms(6);\n\t\t\t\t\tthis.themedRooms = data.themedRooms || this.mockRooms(6);\n\t\t\t\t\tthis.banners = data.banners || [];\n\t\t\t\t\tthis.business = data.business || null;\n\t\t\t\t\tthis.isOpenNow = this.isWithin(this.business.openTime, this.business.closeTime)\n\t\t\t\t} catch (e) {\n\t\t\t\t\tthis.error = '加载失败，已为您展示示例数据';\n\t\t\t\t\tthis.hotRooms = this.mockRooms(6);\n\t\t\t\t\tthis.themedRooms = this.mockRooms(6);\n\t\t\t\t} finally {\n\t\t\t\t\tthis.loading = false;\n\t\t\t\t}\n\t\t\t},\n\t\t\tmockRooms(n) {\n\t\t\t\tconst arr = [];\n\t\t\t\tfor (let i = 0; i < n; i++) {\n\t\t\t\t\tarr.push({\n\t\t\t\t\t\tid: 'm' + i,\n\t\t\t\t\t\tname: ['情侣主题房3','家庭欢聚房','漫威主题房','电竞观赛房','女神专享房','复古胶片房'][i % 6],\n\t\t\t\t\t\tcapacity: [2,4,6,4,2,6][i % 6],\n\t\t\t\t\t\tcover: '/static/uni-center/headers.png'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn arr;\n\t\t\t},\n\t\t\tonFeatureClick(f) {\n\t\t\t\t// 预留路由\n\t\t\t\tuni.showToast({ title: f.text, icon: 'none' });\n\t\t\t},\n\t\t\ttoMore(key) {\n\t\t\t\tuni.navigateTo({ url: '/pages/list/list.nvue?type=' + key });\n\t\t\t},\n\t\t\ttoDetail(room) {\n\t\t\t\tuni.navigateTo({ url: '/pages/list/detail?roomId=' + room.id });\n\t\t\t},\n\t\t\tonBannerChange(e){\n\t\t\t\tthis.currentBanner = e?.detail?.current || 0;\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style lang=\"less\" scoped>\n\n.home {\n\tbackground: #0f1320;\n\tmin-height: 100vh;\n\tcolor: #e7e9f0;\n\tpadding-bottom: 24rpx;\n}\n\n.nav {\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: space-between;\n\tpadding: 12rpx 24rpx 20rpx 24rpx; /* 顶部留给 statusBarHeight，通过行内样式叠加 */\n\tbox-sizing: border-box;\n}\n.brand {\n\tdisplay: flex;\n\talign-items: center;\n}\n.brand-icon { color: #8b5cf6; margin-right: 12rpx; }\n.brand-name { font-weight: 700; font-size: 36rpx; }\n.avatar { font-size: 28rpx; }\n\n.banner { position: relative; margin: 0 24rpx; }\n.banner-swiper { width: 100%; height: 360rpx; border-radius: 20rpx; overflow: hidden; }\n.banner-img {\n\twidth: 100%;\n\theight: 360rpx;\n\tborder-radius: 20rpx;\n\tfilter: brightness(0.8);\n}\n.banner-info { position: absolute; left: 32rpx; bottom: 24rpx; }\n.title { font-size: 44rpx; font-weight: 800; text-shadow: 0 2rpx 6rpx rgba(0,0,0,0.4); }\n.subtitle { font-size: 26rpx; color: #b7bdd1; margin-top: 10rpx; }\n/* 自定义右侧大号指示点 */\n.dots-right { position: absolute; right: 24rpx; bottom: 24rpx; display: flex; align-items: center; }\n.dot2 { width: 20rpx; height:20rpx; border-radius: 50%; background: rgba(255,255,255,0.35); margin-left: 12rpx; }\n.dot2.active { width: 20rpx; height: 20rpx; border-radius: 50%; background: #ffffff; box-shadow: 0 2rpx 6rpx rgba(0,0,0,.35); }\n\n.features {\n\tdisplay: flex;\n\tjustify-content: space-between;\n\tpadding: 24rpx;\n}\n.feature {\n\twidth: 32%;\n\tbackground: #171b2b;\n\tborder-radius: 20rpx;\n\tpadding: 24rpx 0;\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n}\n.f-icon { font-size: 44rpx; margin-bottom: 12rpx; background: rgba(139,92,246,.15); color: #b197ff; width: 80rpx; height: 80rpx; border-radius: 999rpx; display:flex; align-items:center; justify-content:center; }\n.f-text { font-size: 26rpx; color: #d6daf0; }\n\n.status-card { margin: 0 24rpx; background: #171b2b; border-radius: 20rpx; padding: 30rpx 28rpx; box-shadow: 0 6rpx 20rpx rgba(0,0,0,.25) inset; }\n.row { display: flex; align-items: center; margin-bottom: 28rpx;}\n.dot.online { width: 12rpx; height: 12rpx; background: #22c55e; border-radius: 50%; margin-right: 10rpx; }\n.dot.offline { width: 12rpx; height: 12rpx; background: #9ca3af; border-radius: 50%; margin-right: 10rpx; }\n.s-text { color: #c9d1ee; font-size: 24rpx; }\n.tags { margin-top: 14rpx; display: flex; flex-wrap: wrap; gap: 12rpx;}\n.tag { background: #22273b; color: #aeb6d6; padding: 8rpx 14rpx; border-radius: 999rpx; font-size: 22rpx; }\n\n.section { margin: 24rpx 0; }\n.section.hot { margin-bottom: 44rpx; }\n.section-head { padding: 0 24rpx; display: flex; justify-content: space-between; align-items: center; margin-bottom: 24rpx; }\n.section-title { font-weight: 700; font-size: 32rpx; }\n.more { color: #8b5cf6; font-size: 24rpx; }\n\n.grid { display: flex; flex-wrap: wrap; padding: 0 24rpx; justify-content: space-between; }\n.grid .card { width: calc(50% - 16rpx); margin: 0 0 20rpx 0; background: #171b2b; border-radius: 22rpx; overflow: hidden; position: relative; border: 1rpx solid rgba(255,255,255,.06); box-shadow: 0 12rpx 32rpx rgba(0,0,0,.35); }\n.grid.small { padding: 0 24rpx; justify-content: space-between; }\n.grid.small .card { width: calc(33.333% - 12rpx); margin: 0 0 12rpx 0; }\n.cover { width: 100%; height: 220rpx; display: block; }\n.grid.small .cover { height: 120rpx; }\n.card-body { padding: 18rpx; background: #171b2b; }\n.c-title { font-size: 30rpx; font-weight: 800; margin-bottom: 8rpx; }\n.c-meta { font-size: 24rpx; color: #9aa3c7; display:flex; align-items:center; }\n.c-meta .ico { margin-right: 8rpx; }\n\n.grid .mini { border-radius: 20rpx; overflow: hidden; position: relative; }\n.mini-title { position: absolute; left: 12rpx; bottom: 12rpx; color: #fff; text-shadow: 0 2rpx 6rpx rgba(0,0,0,.6); font-size: 24rpx; }\n</style>\n","import MiniProgramPage from 'D:/dy-workspace/private-cinema/pages/home/home.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","uniCloud"],"mappings":"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"}